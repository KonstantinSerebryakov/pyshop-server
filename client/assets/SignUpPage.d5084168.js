import{l as B,k as m,m as C,j as N,t as R}from"./throttle.30e8e76c.js";import{_ as A,a as I,Q as v,S as k}from"./SignInGoogleButton.799c27ee.js";import{Q as P}from"./QPage.a0a32be8.js";import{d as U,r,a as V,z as j,E as D,C as l,B as p,j as t,a0 as d,Q as y,H as E,N as x}from"./index.3fa07472.js";import{A as S}from"./AuthApi.219c7947.js";import"./use-dark.ef4c9cfb.js";import"./index.f348eb5b.js";import"./axios.0a7b01a0.js";import"./ApiConstants.90e07401.js";import"./event-bus.5d4e23e4.js";import"./mitt.550594b0.js";import"./ApiService.7d274f83.js";const $={class:"col-12 row full-height content-around"},F=p("div",{class:"text-h6 text-center"},"Register",-1),z=p("div",{class:"text-h6 text-center"},"OR",-1),te=U({__name:"SignUpPage",setup(G){const i=r(null),u=r(null),c=r(null),f=r(null);function w(){var a,s,n,o;let e=!0;return e=((s=(a=i.value)==null?void 0:a.validate())!=null?s:!1)&&e,e=((o=(n=u.value)==null?void 0:n.validate())!=null?o:!1)&&e,e}function Q(){var e,a,s,n;return{email:(a=(e=i.value)==null?void 0:e.value)!=null?a:"",password:(n=(s=u.value)==null?void 0:s.value)!=null?n:""}}const b=R(async e=>{if(e.preventDefault(),!w())return;h(),f.value=x.create({type:"info",spinner:!0,message:"Authentificating...",position:"top",timeout:0});const a=Q(),s=await S.register(a);c.value=s.abort,s.apiPromise.then(n=>{var g;if(_(),!n)return;const o=n.status;o===201?q(a):o===409&&((g=i.value)==null||g.showEmailBusyError())})},500);async function q(e){x.create({type:"info",message:"User successfully created.",position:"top"}),S.login(e)}function _(){const e=f.value;e&&(e(),f.value=null)}function h(){_();const e=c.value;e!==null&&(e(),c.value=null)}return V(()=>{h()}),(e,a)=>(j(),D(P,{class:"window-height"},{default:l(()=>[p("div",$,[t(N,{class:"auth-card col-12"},{default:l(()=>[t(B,{class:"col-12",onSubmit:d(b)},{default:l(()=>[t(m,{class:"q-px-md col-12"},{default:l(()=>[F,t(A,{ref_key:"emailInputRef",ref:i,class:"q-mt-lg"},null,512),t(I,{ref_key:"passwordInputRef",ref:u,class:"q-mt-lg"},null,512)]),_:1}),t(C,{align:"right",class:"q-px-md q-mb-md col-12"},{default:l(()=>[t(d(y),{type:"submit",label:"Register",color:"primary"})]),_:1}),t(m,{class:"q-px-md col-12 text-h7 text-center"},{default:l(()=>[E(" Already have an account? "),t(d(y),{to:{path:"/signin",query:e.$route.query},label:"Sign In",flat:"",unelevated:"",rounded:"",dense:"",color:"purple"},null,8,["to"])]),_:1})]),_:1},8,["onSubmit"]),t(v,{inset:!0}),z,t(v,{inset:!0}),t(m,{class:"row justify-center align-center"},{default:l(()=>[t(k,{class:"q-mx-auto"})]),_:1})]),_:1})])]),_:1}))}});export{te as default};
