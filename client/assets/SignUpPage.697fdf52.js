import{n as b,l as q,m as p,o as Q}from"./QCardSection.46bdb973.js";import{_ as S,a as A,Q as B,A as _}from"./Auth.api.1f4b1bd1.js";import{Q as g}from"./QBtn.039201a7.js";import{d as I,r as d,a as R,z as k,A as P,B as s,g as V,E as v,j as t,u as h,C as E}from"./index.baa58f94.js";import"./dom.64a8c470.js";import"./axios.323beae6.js";import"./axios.49e4da64.js";import"./user-store.77e42756.js";import"./index.a291a191.js";import"./event-bus.2506ccf7.js";const N={class:"col-12 row full-height content-around"},U=v("div",{class:"text-h6 text-center"},"Register",-1),M=I({__name:"SignUpPage",setup($){const u=V();u==null||u.appContext.config.globalProperties;const r=d(null),c=d(null),i=d(null);function x(){var a,l,n,o;let e=!0;return e=((l=(a=r.value)==null?void 0:a.validate())!=null?l:!1)&&e,e=((o=(n=c.value)==null?void 0:n.validate())!=null?o:!1)&&e,e}function y(){var e,a,l,n;return{email:(a=(e=r.value)==null?void 0:e.value)!=null?a:"",password:(n=(l=c.value)==null?void 0:l.value)!=null?n:""}}async function w(e){if(e.preventDefault(),f(),!x())return;const a=y(),l=await _.register(a);i.value=l.cancel,l.promise.then(n=>{var m;if(!n)return;const o=n.status;o===201?C(a):o===409&&((m=r.value)==null||m.showEmailBusyError())})}async function C(e){_.login(e)}function f(){const e=i.value;e!==null&&(e(),i.value=null)}return R(()=>{f()}),(e,a)=>(k(),P(b,{class:"window-height"},{default:s(()=>[v("div",N,[t(B,{class:"col-12",onSubmit:w},{default:s(()=>[t(q,{class:"auth-card col-12"},{default:s(()=>[t(p,{class:"q-px-md col-12"},{default:s(()=>[U,t(S,{ref_key:"emailInputRef",ref:r,class:"q-mt-lg"},null,512),t(A,{ref_key:"passwordInputRef",ref:c,class:"q-mt-lg"},null,512)]),_:1}),t(Q,{align:"right",class:"q-px-md q-mb-md col-12"},{default:s(()=>[t(h(g),{type:"submit",label:"Register",color:"primary"})]),_:1}),t(p,{class:"q-px-md col-12 text-h7 text-center"},{default:s(()=>[E(" Already have an account? "),t(h(g),{to:{path:"/signin",query:e.$route.query},label:"Sign In",flat:"",unelevated:"",rounded:"",dense:"",color:"purple"},null,8,["to"])]),_:1})]),_:1})]),_:1})])]),_:1}))}});export{M as default};
