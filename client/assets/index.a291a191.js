import{u as M,m as P,n as x,r as C,p as H,w as J,s as R,q}from"./index.baa58f94.js";function K(e){return P()?(x(e),!0):!1}function N(e){return typeof e=="function"?e():M(e)}const O=typeof window!="undefined"&&typeof document!="undefined",$=Object.prototype.toString,B=e=>$.call(e)==="[object Object]",G=()=>{};function I(e,n){function t(...o){return new Promise((i,u)=>{Promise.resolve(e(()=>n.apply(this,o),{fn:n,thisArg:this,args:o})).then(i).catch(u)})}return t}const V=e=>e();function Q(e=V){const n=C(!0);function t(){n.value=!1}function o(){n.value=!0}const i=(...u)=>{n.value&&e(...u)};return{isActive:H(n),pause:t,resume:o,eventFilter:i}}function U(e,n,t={}){const{eventFilter:o=V,...i}=t;return J(e,I(o,n),i)}function X(e,n,t={}){const{eventFilter:o,...i}=t,{eventFilter:u,pause:y,resume:g,isActive:S}=Q(o);return{stop:U(e,n,{...i,eventFilter:u}),pause:y,resume:g,isActive:S}}function Y(e){var n;const t=N(e);return(n=t==null?void 0:t.$el)!=null?n:t}const A=O?window:void 0;O&&window.document;O&&window.navigator;O&&window.location;function j(...e){let n,t,o,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,o,i]=e,n=A):[n,t,o,i]=e,!n)return G;Array.isArray(t)||(t=[t]),Array.isArray(o)||(o=[o]);const u=[],y=()=>{u.forEach(l=>l()),u.length=0},g=(l,s,m,f)=>(l.addEventListener(s,m,f),()=>l.removeEventListener(s,m,f)),S=J(()=>[Y(n),N(i)],([l,s])=>{if(y(),!l)return;const m=B(s)?{...s}:s;u.push(...t.flatMap(f=>o.map(c=>g(l,f,c,m))))},{immediate:!0,flush:"post"}),d=()=>{S(),y()};return K(d),d}const v=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},b="__vueuse_ssr_handlers__",Z=k();function k(){return b in v||(v[b]=v[b]||{}),v[b]}function ee(e,n){return Z[e]||n}function te(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const ne={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},D="vueuse-storage";function re(e,n,t,o={}){var i;const{flush:u="pre",deep:y=!0,listenToStorageChanges:g=!0,writeDefaults:S=!0,mergeDefaults:d=!1,shallow:l,window:s=A,eventFilter:m,onError:f=r=>{console.error(r)}}=o,c=(l?R:C)(n);if(!t)try{t=ee("getDefaultStorage",()=>{var r;return(r=A)==null?void 0:r.localStorage})()}catch(r){f(r)}if(!t)return c;const p=N(n),E=te(p),h=(i=o.serializer)!=null?i:ne[E],{pause:W,resume:_}=X(c,()=>z(c.value),{flush:u,deep:y,eventFilter:m});return s&&g&&(j(s,"storage",F),j(s,D,L)),F(),c;function z(r){try{if(r==null)t.removeItem(e);else{const a=h.write(r),w=t.getItem(e);w!==a&&(t.setItem(e,a),s&&s.dispatchEvent(new CustomEvent(D,{detail:{key:e,oldValue:w,newValue:a,storageArea:t}})))}}catch(a){f(a)}}function T(r){const a=r?r.newValue:t.getItem(e);if(a==null)return S&&p!==null&&t.setItem(e,h.write(p)),p;if(!r&&d){const w=h.read(a);return typeof d=="function"?d(w,p):E==="object"&&!Array.isArray(w)?{...p,...w}:w}else return typeof a!="string"?a:h.read(a)}function L(r){F(r.detail)}function F(r){if(!(r&&r.storageArea!==t)){if(r&&r.key==null){c.value=p;return}if(!(r&&r.key!==e)){W();try{(r==null?void 0:r.newValue)!==h.write(c.value)&&(c.value=T(r))}catch(a){f(a)}finally{r?q(_):_()}}}}}function ie(e,n,t={}){const{window:o=A}=t;return re(e,n,o==null?void 0:o.localStorage,t)}export{ie as u};
