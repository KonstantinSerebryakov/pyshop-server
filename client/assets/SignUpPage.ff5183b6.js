import{l as C,j as N,k as h,n as Q,m as A,t as B}from"./throttle.83e5023a.js";import{d as R,r,a as k,z as I,E as P,C as n,B as x,j as a,a0 as m,Q as v,H as U,N as g}from"./index.eef3f5a4.js";import{_ as V,a as D}from"./PasswordInput.8fd28f28.js";import{A as y}from"./AuthApi.d51238fa.js";import"./use-dark.cf52f7ff.js";import"./index.565fc185.js";import"./axios.0ddf9e5a.js";import"./ApiConstants.1f91d7b3.js";import"./event-bus.14489dbb.js";import"./mitt.550594b0.js";import"./ApiService.6561fc5e.js";const E={class:"col-12 row full-height content-around"},$=x("div",{class:"text-h6 text-center"},"Register",-1),X=R({__name:"SignUpPage",setup(j){const i=r(null),u=r(null),c=r(null),f=r(null);function b(){var t,s,l,o;let e=!0;return e=((s=(t=i.value)==null?void 0:t.validate())!=null?s:!1)&&e,e=((o=(l=u.value)==null?void 0:l.validate())!=null?o:!1)&&e,e}function w(){var e,t,s,l;return{email:(t=(e=i.value)==null?void 0:e.value)!=null?t:"",password:(l=(s=u.value)==null?void 0:s.value)!=null?l:""}}const S=B(async e=>{if(e.preventDefault(),!b())return;p(),f.value=g.create({type:"info",spinner:!0,message:"Authentificating...",position:"top",timeout:0});const t=w(),s=await y.register(t);c.value=s.abort,s.apiPromise.then(l=>{var _;if(d(),!l)return;const o=l.status;o===201?q(t):o===409&&((_=i.value)==null||_.showEmailBusyError())})},500);async function q(e){g.create({type:"info",message:"User successfully created.",position:"top"}),y.login(e)}function d(){const e=f.value;e&&(e(),f.value=null)}function p(){d();const e=c.value;e!==null&&(e(),c.value=null)}return k(()=>{p()}),(e,t)=>(I(),P(C,{class:"window-height"},{default:n(()=>[x("div",E,[a(A,{class:"col-12",onSubmit:m(S)},{default:n(()=>[a(N,{class:"auth-card col-12"},{default:n(()=>[a(h,{class:"q-px-md col-12"},{default:n(()=>[$,a(V,{ref_key:"emailInputRef",ref:i,class:"q-mt-lg"},null,512),a(D,{ref_key:"passwordInputRef",ref:u,class:"q-mt-lg"},null,512)]),_:1}),a(Q,{align:"right",class:"q-px-md q-mb-md col-12"},{default:n(()=>[a(m(v),{type:"submit",label:"Register",color:"primary"})]),_:1}),a(h,{class:"q-px-md col-12 text-h7 text-center"},{default:n(()=>[U(" Already have an account? "),a(m(v),{to:{path:"/signin",query:e.$route.query},label:"Sign In",flat:"",unelevated:"",rounded:"",dense:"",color:"purple"},null,8,["to"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])]),_:1}))}});export{X as default};
