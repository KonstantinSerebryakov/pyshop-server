import{k as S,u as f,U as i}from"./index.791b8fcf.js";import{EVENT_AUTH as r}from"./event-bus.244f33bd.js";import{u as l}from"./user-info-store.e702862d.js";import"./mitt.550594b0.js";import"./index.1b589c80.js";import"./axios.e3f3e6f9.js";import"./ApiService.4b53f972.js";var R=S(({app:E,store:n,router:u})=>{const s=E.config.globalProperties.$eventBus,e=f(n),c=l(n);s.on(r.LOGIN_SUCCESS,a=>{const t=Math.floor(Date.now()/1e3),o=a;e.$state.data=new i(o.user),e.$state.refreshToken={...o.refresh_token,iat:t},e.$state.accessToken={...o.access_token,iat:t}}),s.on(r.LOGOUT_SUCCESS,()=>{e.clear(),c.clear(),sessionStorage.clear()}),s.on(r.REFRESH_TOKEN_UNVALIDATED,()=>{e.clear(),c.clear(),e.clearRefreshToken(),sessionStorage.clear()}),s.on(r.REFRESH_TOKEN_REFRESHED,a=>{const t=Math.floor(Date.now()/1e3),o=a;e.$state.refreshToken={...o.refresh_token,iat:t},e.$state.accessToken={...o.access_token,iat:t}})});export{R as default};
