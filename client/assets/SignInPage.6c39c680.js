import{l as S,k as m,m as b,j as q,t as I}from"./throttle.b8de9102.js";import{d as C,r as u,a as B,z as N,E as k,C as n,B as f,j as e,a0 as A,Q as g,H as P,N as R}from"./index.499e8ed9.js";import{_ as E,a as V,Q as x,S as j}from"./SignInGoogleButton.759a577c.js";import{Q as D}from"./QPage.be6825f3.js";import{A as $}from"./AuthApi.6494122c.js";import"./use-dark.d31b8b89.js";import"./index.c8a79a65.js";import"./axios.a5465967.js";import"./ApiConstants.90e07401.js";import"./event-bus.321b2154.js";import"./mitt.550594b0.js";import"./ApiService.6104b024.js";const z={class:"col-12 row full-height content-around"},F=f("div",{class:"text-h6 text-center"},"Login",-1),L=f("div",{class:"text-h6 text-center"},"OR",-1),et=C({__name:"SignInPage",setup(U){const r=u(null),i=u(null),c=u(null),d=u(null);function w(){var a,o,s,l;let t=!0;return t=((o=(a=r.value)==null?void 0:a.validate())!=null?o:!1)&&t,t=((l=(s=i.value)==null?void 0:s.validate())!=null?l:!1)&&t,t}function y(){var t,a,o,s;return{email:(a=(t=r.value)==null?void 0:t.value)!=null?a:"",password:(s=(o=i.value)==null?void 0:o.value)!=null?s:""}}const Q=I(async t=>{if(t.preventDefault(),!w())return;p(),d.value=R.create({type:"info",spinner:!0,message:"Authorizing...",position:"top",timeout:0});const a=y(),o=await $.login(a);c.value=o.abort,o.apiPromise.then(s=>{var h,v;const l=d.value;if(l&&l(),!s)return;const _=s.status;(_===404||_===401)&&((h=r.value)==null||h.showEmailInvalidError(),(v=i.value)==null||v.showInvalidPasswordError())}).catch(s=>{})},500);function p(){const t=d.value;t&&t();const a=c.value;a!==null&&(a(),c.value=null)}return B(()=>{p()}),(t,a)=>(N(),k(D,{class:"window-height"},{default:n(()=>[f("div",z,[e(q,{class:"auth-card col-12"},{default:n(()=>[e(S,{class:"col-12",onSubmit:A(Q)},{default:n(()=>[e(m,{class:"q-px-md col-12"},{default:n(()=>[F,e(E,{ref_key:"emailInputRef",ref:r,class:"q-mt-lg"},null,512),e(V,{ref_key:"passwordInputRef",ref:i,class:"q-mt-lg"},null,512)]),_:1}),e(b,{align:"right",class:"q-px-md q-mb-md col-12"},{default:n(()=>[e(g,{type:"submit",label:"Login",color:"primary"})]),_:1}),e(m,{class:"q-px-md col-12 text-h7 text-center"},{default:n(()=>[P(" Don't have an account? "),e(g,{to:{path:"/signup",query:t.$route.query},label:"Sign Up",flat:"",unelevated:"",rounded:"",dense:"",color:"purple"},null,8,["to"])]),_:1})]),_:1},8,["onSubmit"]),e(x,{inset:!0}),L,e(x,{inset:!0}),e(m,{class:"row justify-center align-center"},{default:n(()=>[e(j,{class:"q-mx-auto"})]),_:1})]),_:1})])]),_:1}))}});export{et as default};
