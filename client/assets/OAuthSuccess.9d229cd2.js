import{Q as p}from"./QPage.a0a32be8.js";import{d as i,aI as m,aJ as d,o as l,u as f,U as h,z as _,E as x,C as q,B as k}from"./index.3fa07472.js";import{A as y}from"./ApiService.7d274f83.js";import"./event-bus.5d4e23e4.js";import"./index.f348eb5b.js";import"./axios.0a7b01a0.js";import"./mitt.550594b0.js";const R=k("div",{class:"q-mx-auto",style:{"max-width":"600px"}},null,-1),I=i({__name:"OAuthSuccess",setup(v){const e=m();return d(),l(()=>{const t=e.currentRoute.value.query.refresh_token,s=Number.parseInt(e.currentRoute.value.query.exp),u=e.currentRoute.value.query.userid;if(!t||!s)return;const r=f(),n=Math.floor(Date.now()/1e3);r.$state.refreshToken={token:t,exp:s,iat:n},y.abortableRequest({url:"users/"+u,method:"GET"}).requestPromise.then(o=>{const c=o.status,a=o.data;c===200&&a&&(r.$state.data=new h(a))}).then(()=>{e.push("/")})}),(t,s)=>(_(),x(p,{class:"q-pt-md q-pb-md"},{default:q(()=>[R]),_:1}))}});export{I as default};
