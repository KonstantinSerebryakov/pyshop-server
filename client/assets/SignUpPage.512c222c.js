import{l as C,j as N,k as h,n as Q,m as A,t as B}from"./throttle.93a1df7d.js";import{d as R,r,a as k,z as I,E as P,C as n,B as x,j as a,a0 as f,Q as v,H as U,N as g}from"./index.541f43d9.js";import{_ as V,a as D,A as y}from"./AuthApi.bb79ecbc.js";import"./use-dark.7725f162.js";import"./index.e92490f7.js";import"./axios.49e4da64.js";import"./ApiConstants.4dae4bb1.js";import"./event-bus.a1695423.js";import"./mitt.550594b0.js";import"./ApiService.086d2991.js";import"./axios.0d7c59f9.js";const E={class:"col-12 row full-height content-around"},$=x("div",{class:"text-h6 text-center"},"Register",-1),X=R({__name:"SignUpPage",setup(j){const i=r(null),u=r(null),c=r(null),d=r(null);function b(){var t,s,l,o;let e=!0;return e=((s=(t=i.value)==null?void 0:t.validate())!=null?s:!1)&&e,e=((o=(l=u.value)==null?void 0:l.validate())!=null?o:!1)&&e,e}function w(){var e,t,s,l;return{email:(t=(e=i.value)==null?void 0:e.value)!=null?t:"",password:(l=(s=u.value)==null?void 0:s.value)!=null?l:""}}const S=B(async e=>{if(e.preventDefault(),!b())return;p(),d.value=g.create({type:"info",spinner:!0,message:"Authentificating...",position:"top",timeout:0});const t=w(),s=await y.register(t);c.value=s.abort,s.apiPromise.then(l=>{var _;if(m(),!l)return;const o=l.status;o===201?q(t):o===409&&((_=i.value)==null||_.showEmailBusyError())})},500);async function q(e){g.create({type:"info",message:"User successfully created.",position:"top"}),y.login(e)}function m(){const e=d.value;e&&(e(),d.value=null)}function p(){m();const e=c.value;e!==null&&(e(),c.value=null)}return k(()=>{p()}),(e,t)=>(I(),P(C,{class:"window-height"},{default:n(()=>[x("div",E,[a(A,{class:"col-12",onSubmit:f(S)},{default:n(()=>[a(N,{class:"auth-card col-12"},{default:n(()=>[a(h,{class:"q-px-md col-12"},{default:n(()=>[$,a(V,{ref_key:"emailInputRef",ref:i,class:"q-mt-lg"},null,512),a(D,{ref_key:"passwordInputRef",ref:u,class:"q-mt-lg"},null,512)]),_:1}),a(Q,{align:"right",class:"q-px-md q-mb-md col-12"},{default:n(()=>[a(f(v),{type:"submit",label:"Register",color:"primary"})]),_:1}),a(h,{class:"q-px-md col-12 text-h7 text-center"},{default:n(()=>[U(" Already have an account? "),a(f(v),{to:{path:"/signin",query:e.$route.query},label:"Sign In",flat:"",unelevated:"",rounded:"",dense:"",color:"purple"},null,8,["to"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])]),_:1}))}});export{X as default};
