import{n as C,l as b,m as _,o as q}from"./QCardSection.46bdb973.js";import{Q as h}from"./QBtn.039201a7.js";import{_ as Q,a as y,Q as I,A as S}from"./Auth.api.1f4b1bd1.js";import{d as A,r as d,a as B,z as P,A as k,B as n,g as E,E as v,j as e,C as N}from"./index.baa58f94.js";import"./dom.64a8c470.js";import"./axios.323beae6.js";import"./axios.49e4da64.js";import"./user-store.77e42756.js";import"./index.a291a191.js";import"./event-bus.2506ccf7.js";const R={class:"col-12 row full-height content-around"},V=v("div",{class:"text-h6 text-center"},"Login",-1),K=A({__name:"SignInPage",setup(D){const c=E();c==null||c.appContext.config.globalProperties;const r=d(null),u=d(null),i=d(null);function g(){var t,l,o,s;let a=!0;return a=((l=(t=r.value)==null?void 0:t.validate())!=null?l:!1)&&a,a=((s=(o=u.value)==null?void 0:o.validate())!=null?s:!1)&&a,a}function x(){var a,t,l,o;return{email:(t=(a=r.value)==null?void 0:a.value)!=null?t:"",password:(o=(l=u.value)==null?void 0:l.value)!=null?o:""}}async function w(a){if(a.preventDefault(),m(),!g())return;const t=x(),l=await S.login(t);i.value=l.cancel,l.promise.then(o=>{var f,p;if(!o)return;const s=o.status;(s===404||s===401)&&((f=r.value)==null||f.showEmailNotFoundError(),(p=u.value)==null||p.showInvalidPasswordError())})}function m(){const a=i.value;a!==null&&(a(),i.value=null)}return B(()=>{m()}),(a,t)=>(P(),k(C,{class:"window-height"},{default:n(()=>[v("div",R,[e(I,{class:"col-12",onSubmit:w},{default:n(()=>[e(b,{class:"auth-card col-12"},{default:n(()=>[e(_,{class:"q-px-md col-12"},{default:n(()=>[V,e(Q,{ref_key:"emailInputRef",ref:r,class:"q-mt-lg"},null,512),e(y,{ref_key:"passwordInputRef",ref:u,class:"q-mt-lg"},null,512)]),_:1}),e(q,{align:"right",class:"q-px-md q-mb-md col-12"},{default:n(()=>[e(h,{type:"submit",label:"Login",color:"primary"})]),_:1}),e(_,{class:"q-px-md col-12 text-h7 text-center"},{default:n(()=>[N(" Don't have an account? "),e(h,{to:{path:"/signup",query:a.$route.query},label:"Sign Up",flat:"",unelevated:"",rounded:"",dense:"",color:"purple"},null,8,["to"])]),_:1})]),_:1})]),_:1})])]),_:1}))}});export{K as default};
